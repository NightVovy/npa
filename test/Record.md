Record

## 2024.7.1

Computing alpha = 0.0.
E:\NPA\violationOfTitiled.py:103: DeprecationWarning: Option 'verbose' is deprecated, use 'verbosity'.
  return prob.solve(solver=SOLVER, verbose=verb), pc.Constant(O[0].value), pc.Constant(O[1].value)
   Best value = 2.828144898238403
Computing alpha = 0.1111111111111111.
   Best value = 2.8111004891999505
Computing alpha = 0.2222222222222222.
   Best value = 2.824738075143287
Computing alpha = 0.3333333333333333.
   Best value = 2.818556453921821
Computing alpha = 0.4444444444444444.
   Best value = 2.8874309082595224
Computing alpha = 0.5555555555555556.
   Best value = 2.92038311108805
Computing alpha = 0.6666666666666666.
   Best value = 2.8720673891849726
Computing alpha = 0.7777777777777777.
   Best value = 2.9453841764623534
Computing alpha = 0.8888888888888888.
   Best value = 2.9922764257504957
Computing alpha = 1.0.
   Best value = 3.047035116980826
进程已结束，退出代码为 0



## 2024.9.14

git config --global user.name "NightVovy"

git config --global user.email pavlova2031@hotmail.com



git config --global --list



git clone https://github.com/NightVovy/npa.git



## 2024.9.19

计算态和测量

### 问题有点明显了：目标矩阵全要变成1了。



Strange behavior : primal < dual :: line 158 in sdpa_solve.cpp
Iteration 8:
p00: 0.6114542354346478
p01: 0.5862298320167972
p10: 0.505888678884466
p11: 0.1533514031160802

F: 4.298885230945887

cos_beta: -0.03826284855329791
alpha: 0.03622036764168102
β的值为: 1.6090685179303024 弧度
β的值为: 92.19283502477676 度
cos2theta: 0.2191159129706409
θ的值为: 0.6749440275518619 弧度

θ的值为: 38.67144418628324 度

cos(μ1)的值为: 0.7683368039580412
sin(μ1)的值为: 0.6400457449929206
cos(μ2)的值为: 0.969565362798175

sin(μ2)的值为: -0.24483261069972587

Optimal value: 1.5864413371865922
Optimal matrix X: [[1.         0.99999756 0.99999752 0.99999755 0.99999754 0.99999969
  0.99999972 0.99999965 0.9999984 ]
 [0.99999756 1.         0.99999905 0.99999969 0.99999972 0.99999755
  0.99999754 0.9999975  0.9999975 ]
 [0.99999752 0.99999905 1.         0.99999965 0.9999984  0.9999975
  0.9999975  0.99999755 0.99999754]
 [0.99999755 0.99999969 0.99999965 1.         0.99999915 0.99999756
  0.9999975  0.99999752 0.9999975 ]
 [0.99999754 0.99999972 0.9999984  0.99999915 1.         0.9999975
  0.99999756 0.9999975  0.99999752]
 [0.99999969 0.99999755 0.9999975  0.99999756 0.9999975  1.
  0.99999915 0.99999905 0.99999768]
 [0.99999972 0.99999754 0.9999975  0.9999975  0.99999756 0.99999915
  1.         0.9999997  0.99999905]
 [0.99999965 0.9999975  0.99999755 0.99999752 0.9999975  0.99999905

    0.9999997  1.         0.99999915]
 [0.9999984  0.9999975  0.99999754 0.9999975  0.99999752 0.99999768
    0.99999905 0.99999915 1.        ]]
L_Q: 2.633194402203614
Is 实际值大于理论值  False
Difference: -1.0467530650170218






Strange behavior : primal < dual :: line 158 in sdpa_solve.cpp
Iteration 9:
p00: 0.9343670147690148
p01: 0.9255685129067763
p10: 0.7364442356247228
p11: 0.4508393714041321

F: 2.6334958354038136

cos_beta: -0.0074106151303280675
alpha: 0.2264760916815105
β的值为: 1.5782070097552936 弧度
β的值为: 90.42460085694026 度
cos2theta: 0.42915215786768657
θ的值为: 0.5636212175586817 弧度

θ的值为: 32.29311701013723 度

cos(μ1)的值为: 0.8130477295773767
sin(μ1)的值为: 0.5821970366027922
cos(μ2)的值为: 0.9158661629218301

sin(μ2)的值为: -0.4014837127640969

Optimal value: 2.3720157419782124
Optimal matrix X: [[1.         0.9999961  0.99999514 0.99999589 0.99999575 0.99999913
  0.99999907 0.99999843 0.99999341]
 [0.9999961  1.         0.9999962  0.99999913 0.99999907 0.99999589
  0.99999575 0.999995   0.99999498]
 [0.99999514 0.9999962  1.         0.99999843 0.99999341 0.999995
  0.99999498 0.99999589 0.99999575]
 [0.99999589 0.99999913 0.99999843 1.         0.99999706 0.9999961
  0.99999513 0.99999514 0.99999498]
 [0.99999575 0.99999907 0.99999341 0.99999706 1.         0.99999513
  0.9999961  0.99999498 0.99999514]
 [0.99999913 0.99999589 0.999995   0.9999961  0.99999513 1.
  0.99999706 0.9999962  0.99999108]
 [0.99999907 0.99999575 0.99999498 0.99999513 0.9999961  0.99999706
  1.         0.99999929 0.9999962 ]
 [0.99999843 0.999995   0.99999589 0.99999514 0.99999498 0.9999962

    0.99999929 1.         0.99999706]
 [0.99999341 0.99999498 0.99999575 0.99999498 0.99999514 0.99999108
    0.9999962  0.99999706 1.        ]]
L_Q: 2.7681935822022377
Is 实际值大于理论值  False
Difference: -0.39617784022402525





Strange behavior : primal < dual :: line 158 in sdpa_solve.cpp
Iteration 10:
p00: 0.9252483174156658
p01: 0.9154882975880418
p10: 0.5679452305526295
p11: 0.18057534512733353

F: 4.145198089762145

cos_beta: -0.01303908021333667
alpha: 0.06789195717159768
β的值为: 1.583835776515386 弧度
β的值为: 90.74710543615709 度
cos2theta: 0.46801941127214286
θ的值为: 0.5418740409015628 弧度

θ的值为: 31.04709557135889 度

cos(μ1)的值为: 0.8774051180457407
sin(μ1)的值为: 0.47975020461396367
cos(μ2)的值为: 0.9852227498923324

sin(μ2)的值为: -0.17127794106244548

Optimal value: 2.2959981182516245
Optimal matrix X: [[1.         0.99999875 0.99999871 0.99999874 0.99999874 0.99999985
  0.99999987 0.99999973 0.99999913]
 [0.99999875 1.         0.99999942 0.99999985 0.99999987 0.99999874
  0.99999874 0.9999987  0.9999987 ]
 [0.99999871 0.99999942 1.         0.99999974 0.99999913 0.9999987
  0.9999987  0.99999874 0.99999874]
 [0.99999874 0.99999985 0.99999973 1.         0.99999959 0.99999875
  0.99999871 0.99999871 0.9999987 ]
 [0.99999874 0.99999987 0.99999913 0.99999959 1.         0.99999871
  0.99999875 0.9999987  0.99999871]
 [0.99999985 0.99999874 0.9999987  0.99999875 0.99999871 1.
  0.99999959 0.99999942 0.9999988 ]
 [0.99999987 0.99999874 0.9999987  0.99999871 0.99999875 0.99999959
  1.         0.99999977 0.99999942]
 [0.99999973 0.9999987  0.99999874 0.99999871 0.9999987  0.99999942

    0.99999977 1.         0.99999959]
 [0.99999913 0.9999987  0.99999874 0.9999987  0.99999871 0.9999988
    0.99999942 0.99999959 1.        ]]
L_Q: 3.8934805077831887
Is 实际值大于理论值  False
Difference: -1.5974823895315642





### 如果是case1呢？

case1也有问题，可能差值会变大。

但是不管怎么变，理论值永远大于实际值。

但是应该是实际值（上限）要比理论值要大...

Iteration 5:
p00: 0.6118528947223795
p01: 0.3663618432936917
p10: 0.29214464853521815
p11: 0.13949386065204183
Optimal value: 1.1324075895079093
Optimal matrix X: [[ 9.99999998e-01 -3.51895655e-17 -3.22556862e-17 -3.51417844e-17
  -3.33641569e-17  9.87840367e-01  9.65694625e-01  9.45489916e-01
   7.31350337e-01]
 [-3.51895646e-17  9.99999997e-01  8.83363597e-01  9.87840368e-01
   9.65694626e-01 -3.51417878e-17 -3.33641547e-17 -3.10786104e-17
  -2.95092859e-17]
 [-3.22556878e-17  8.83363597e-01  9.99999996e-01  9.45489917e-01
   7.31350336e-01 -3.10786070e-17 -2.95092854e-17 -3.51417851e-17
  -3.33641564e-17]
 [-3.51417823e-17  9.87840368e-01  9.45489917e-01  9.99999997e-01
   9.13579238e-01 -3.51895682e-17 -3.21746091e-17 -3.22556832e-17
  -2.94954980e-17]
 [-3.33641582e-17  9.65694626e-01  7.31350336e-01  9.13579238e-01
   9.99999996e-01 -3.21746065e-17 -3.51895646e-17 -2.94954976e-17
  -3.22556859e-17]
 [ 9.87840367e-01 -3.51417895e-17 -3.10786052e-17 -3.51895695e-17
  -3.21746051e-17  9.99999997e-01  9.13579238e-01  8.83363597e-01
   6.16425526e-01]
 [ 9.65694624e-01 -3.33641536e-17 -2.95092852e-17 -3.21746104e-17
  -3.51895641e-17  9.13579238e-01  9.99999997e-01  9.97619796e-01
   8.83363597e-01]
 [ 9.45489916e-01 -3.10786122e-17 -3.51417855e-17 -3.22556817e-17
  -2.94954974e-17  8.83363597e-01  9.97619796e-01  9.99999997e-01
   9.13579237e-01]
 [ 7.31350337e-01 -2.95092862e-17 -3.33641562e-17 -2.94954982e-17
  -3.22556857e-17  6.16425526e-01  8.83363597e-01  9.13579237e-01
   9.99999997e-01]]
L_Q: 1.1324075951137782
Is actual result > Theoretical  False
Difference: -5.605868880209641e-09



（差值太大了）

Iteration 6:
p00: 0.7851759613930136
p01: 0.5924145688620425
p10: 0.5142344384136116
p11: 0.19967378215835974
Optimal value: 1.6921509624397353
Optimal matrix X: [[9.99999987e-01 4.92312635e-15 4.92312444e-15 4.92312605e-15
  4.92312500e-15 9.99997516e-01 9.99995746e-01 9.99994413e-01
  9.99964402e-01]
 [4.92312633e-15 9.99999984e-01 9.99984616e-01 9.99997524e-01
  9.99995750e-01 4.92312608e-15 4.92312497e-15 4.92312344e-15
  4.92312232e-15]
 [4.92312446e-15 9.99984615e-01 9.99999980e-01 9.99994418e-01
  9.99964400e-01 4.92312341e-15 4.92312231e-15 4.92312605e-15
  4.92312500e-15]
 [4.92312603e-15 9.99997523e-01 9.99994417e-01 9.99999983e-01
  9.99986879e-01 4.92312637e-15 4.92312334e-15 4.92312442e-15
  4.92312369e-15]
 [4.92312502e-15 9.99995749e-01 9.99964401e-01 9.99986879e-01
  9.99999980e-01 4.92312331e-15 4.92312635e-15 4.92312368e-15
  4.92312444e-15]
 [9.99997512e-01 4.92312610e-15 4.92312340e-15 4.92312639e-15
  4.92312329e-15 9.99999981e-01 9.99986880e-01 9.99984616e-01
  9.99943742e-01]
 [9.99995743e-01 4.92312495e-15 4.92312231e-15 4.92312336e-15
  4.92312636e-15 9.99986881e-01 9.99999981e-01 9.99999812e-01
  9.99984616e-01]
 [9.99994411e-01 4.92312345e-15 4.92312605e-15 4.92312440e-15
  4.92312368e-15 9.99984617e-01 9.99999812e-01 9.99999981e-01
  9.99986878e-01]
 [9.99964402e-01 4.92312233e-15 4.92312499e-15 4.92312369e-15
  4.92312443e-15 9.99943742e-01 9.99984615e-01 9.99986877e-01
  9.99999979e-01]]
L_Q: 1.6922977869772866
Is actual result > Theoretical  False
Difference: -0.00014682453755132663



#### Iteration 9:

cholesky miss condition :: not positive definite :: info = 77 :: line 784 in sdpa_linear.cpp
There are some possibilities. :: line 786 in sdpa_linear.cpp

1. SDPA terminates due to inaccuracy of numerical error :: line 787 in sdpa_linear.cpp
2. The input problem may not have (any) interior-points :: line 788 in sdpa_linear.cpp
3. Input matrices are linearly dependent :: line 789 in sdpa_linear.cpp

p00: 0.9093204020787821
p01: 0.4951769101112702
p10: 0.12203823484477883
p11: 0.034388521115218396
Optimal value: 1.4921470257283707
Optimal matrix X: [[ 1.00000000e+00 -1.96344923e-15 -1.96344924e-15 -1.96344923e-15
  -1.96344923e-15  1.00000000e+00  1.00000000e+00  9.99999999e-01
   9.99999998e-01]
 [-1.96344923e-15  1.00000000e+00  9.99999999e-01  1.00000000e+00
   1.00000000e+00 -1.96344923e-15 -1.96344923e-15 -1.96344924e-15
  -1.96344923e-15]
 [-1.96344924e-15  9.99999999e-01  1.00000000e+00  9.99999999e-01
   9.99999998e-01 -1.96344924e-15 -1.96344923e-15 -1.96344923e-15
  -1.96344923e-15]
 [-1.96344923e-15  1.00000000e+00  9.99999999e-01  1.00000000e+00
   1.00000000e+00 -1.96344923e-15 -1.96344922e-15 -1.96344924e-15
  -1.96344924e-15]
 [-1.96344923e-15  1.00000000e+00  9.99999998e-01  1.00000000e+00
   1.00000000e+00 -1.96344922e-15 -1.96344923e-15 -1.96344924e-15
  -1.96344924e-15]
 [ 1.00000000e+00 -1.96344923e-15 -1.96344924e-15 -1.96344923e-15
  -1.96344923e-15  1.00000000e+00  1.00000000e+00  9.99999999e-01
   9.99999998e-01]
 [ 1.00000000e+00 -1.96344923e-15 -1.96344923e-15 -1.96344922e-15
  -1.96344923e-15  1.00000000e+00  1.00000000e+00  1.00000000e+00
   9.99999999e-01]
 [ 9.99999999e-01 -1.96344924e-15 -1.96344923e-15 -1.96344924e-15
  -1.96344924e-15  9.99999999e-01  1.00000000e+00  1.00000000e+00
   1.00000000e+00]
 [ 9.99999998e-01 -1.96344923e-15 -1.96344923e-15 -1.96344924e-15
  -1.96344924e-15  9.99999998e-01  9.99999999e-01  1.00000000e+00
   1.00000000e+00]]
L_Q: 1.6801635326467097
Is actual result > Theoretical  False
Difference: -0.18801650691833904



#### 阅读材料

https://arxiv.org/pdf/2302.03529

https://mateusaraujo.info/2023/02/08/sdps-are-not-cheat-codes/



## 2024.9.26

可能的问题：

- gamma矩阵里放的是测量，就不需要和为1的约束
  - 如果放的是投影呢？怎么放？
  - 一个测量的不同算子的和才是1

![image-20240926144247455](C:\Users\wzz20\AppData\Roaming\Typora\typora-user-images\image-20240926144247455.png)





## 2024.9.27

case0



### case1

Iteration 1:

| p00           | 0.9507143064099162  |      | p01        | 0.7319939418114051   |      |
| ------------- | ------------------- | ---- | ---------- | -------------------- | ---- |
| p10           | 0.5986584841970366  |      | p11        | 0.3745401188473625   |      |
| F             | 2.154418086112671   |      |            |                      |      |
| $cos\beta$    | 0.47167200226272504 |      | $sin\beta$ | 0.8817740766667344   |      |
| $\beta$       |                     |      | $\theta$   |                      |      |
|               |                     |      |            |                      |      |
| A0            | 0                   |      |            |                      |      |
| A0B0          | 0.9193024254448362  |      | A0B1       | 0.859494235409838    |      |
| A1B0          | 0.7806330258113044  |      | A1B1       | -0.04531543012491176 |      |
| Iap           | 1.9874435716605137  |      |            |                      |      |
| Optimal value | 1.987443394211576   |      | I_Q        | 1.9874435716605132   |      |



### case2

Iteration 1:

| p00                | 0.9695846277645586    |      | p01                 | 0.9394989415641891   |      |
| ------------------ | --------------------- | ---- | ------------------- | -------------------- | ---- |
| p10                | 0.8948273504276488    |      | p11                 | 0.7751328233611146   |      |
| F                  | 2.154418086112671     |      |                     |                      |      |
| $cos\beta$         | -0.018015810599908977 |      | $\alpha$            | 1.1957999576221703   |      |
| $\beta$            | 1.5888131121007418    |      | $\theta$            | 0.19733614581843217  |      |
|                    |                       |      | $cos\theta$         | 0.8336707405825899   |      |
| A0                 | 0.9231226196609568    |      | $cos\theta$FromA5   | 0.81789874           |      |
| A0B0               | 0.9406471278975976    |      | A0B1                | 0.9544693636440511   |      |
| A1B0               | 0.11352822002879098   |      | A1B1                | -0.13187841616803442 |      |
| Iap                | 3.116441387121914     | 2    | $\lambda$ A20       | 3.256017848829302    | 1    |
| $\lambda$ A14-1    | 3.116441387121914     | 2    | $\lambda$ A14-2     | 3.1164413871219137   |      |
| $\lambda$ A14-3    | 3.1164413871219137    |      |                     |                      |      |
| Optimal value      | 3.2245774309377877    |      | I_Q                 | 3.256017848829302    | 1    |
|                    |                       |      |                     |                      |      |
| $\theta$from A5A13 | 1.0610123             |      | $\beta_2$from A5A13 | 1.73325527           |      |

 

Iteration 2: not changed

| p00             | 0.9695846277645586    |      | p01             | 0.9394989415641891   |      |
| --------------- | --------------------- | ---- | --------------- | -------------------- | ---- |
| p10             | 0.8948273504276488    |      | p11             | 0.7751328233611146   |      |
| F               | 2.154418086112671     |      |                 |                      |      |
| $cos\beta$      | -0.018015810599908977 |      | $\alpha$        | 1.1957999576221703   |      |
| $\beta$         | 1.5888131121007418    |      | $\theta$        | 0.19733614581843217  |      |
|                 |                       |      |                 |                      |      |
| A0              | 0.9231226196609568    |      |                 |                      |      |
| A0B0            | 0.9406471278975976    |      | A0B1            | 0.9544693636440511   |      |
| A1B0            | 0.11352822002879098   |      | A1B1            | -0.13187841616803442 |      |
| Iap             | 3.116441387121914     |      | $\lambda$ A20   | 1.8337136139630752   |      |
| $\lambda$ A14-1 | 1.5905447783847269    |      | $\lambda$ A14-2 | 1.590544778384727    |      |
| Optimal value   | 3.2245774309377877    |      | I_Q             | 3.256017848829302    |      |

Iteration 3: not changed

| p00             | 0.9695846277645586    |      | p01             | 0.9394989415641891   |      |
| --------------- | --------------------- | ---- | --------------- | -------------------- | ---- |
| p10             | 0.8948273504276488    |      | p11             | 0.7751328233611146   |      |
| F               | 2.154418086112671     |      |                 |                      |      |
| $cos\beta$      | -0.018015810599908977 |      | $\alpha$        | 1.1957999576221703   |      |
| $\beta$         | 1.5888131121007418    |      | $\theta$        | 0.19733614581843217  |      |
|                 |                       |      |                 |                      |      |
| A0              | 0.9231226196609568    |      |                 |                      |      |
| A0B0            | 0.9406471278975976    |      | A0B1            | 0.9544693636440511   |      |
| A1B0            | 0.11352822002879098   |      | A1B1            | -0.13187841616803442 |      |
| Iap             | 3.116441387121914     |      | $\lambda$ A20   | 3.256017848829302    |      |
| $\lambda$ A14-1 | 3.116441387121914     |      | $\lambda$ A14-2 | 3.1164413871219137   |      |
| Optimal value   | 3.2245774309377877    |      | I_Q             | 3.256017848829302    |      |





## 2024.10.1

![1ec349f4a2a8e7893c403f4a9244bde](E:\WechatFiles\WeChat Files\wxid_1277332773012\FileStorage\Temp\1ec349f4a2a8e7893c403f4a9244bde.png)

根据A3定义的lambda,检查下这个推导有没有问题

在A16,A17成立的条件下，根据A12,A13同时成立，是不是推出sin beta1=0

<img src="E:\WechatFiles\WeChat Files\wxid_1277332773012\FileStorage\Temp\30460f79030e1beb3631ad538547f3c.jpg" alt="30460f79030e1beb3631ad538547f3c" style="zoom: 80%;" />

![aee6ef6a6f93ac4cf28abe0f1863b41](E:\WechatFiles\WeChat Files\wxid_1277332773012\FileStorage\Temp\aee6ef6a6f93ac4cf28abe0f1863b41.jpg)

然后验证后面部分推导看有没问题

如果没问题。重点关注一元三次方程部分，首先解存在条件，及得到的解中实数解和复数解得问题。我们要其中使得lambda最大的实解。

注意解存在条件和 解取值范围，需要取在-1到1之间的解

这部分可能需要数值去跑，参数比较多，解比较长，解满足条件也比较长。可以先随机赋值再判断，再给值

![9b0b8566f93f4760efcedde0e66fce1](F:\Data\Pictures\9b0b8566f93f4760efcedde0e66fce1.jpg)

得到 cosbeta2后，再由这个等式得到theta、再由A5得到alpha





## 2024.10.15

这部分估计没问题，只是在后面处理的时候需要根据倒数第二行的公式分两种情况，一种是p10=p11, 那么A=B就求出cosbeta 了，这种情况下之前文章中的结果就出来了。对应p00=p01,你再把这两个值不同情况下的结论再推导一下

【p10=p11=$\beta$ 并不能得出$\sqrt{(4+a^2)(1+\beta^2)}$】



第二种情况是p10不等于p11, 并且B- A大于0，A和B都不为0。这时就对应到我们后面的推导了。这部分你还是根据取的P 值，来看一下导函数关于cosbeta的函数曲线情况。

这里的导函数是整个导函数，不只是一元三次函数部分